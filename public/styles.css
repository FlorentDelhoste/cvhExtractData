:root {
  /* Material dark theme tokens */
  --md-surface: #121212;
  --md-surface-variant: #1e1e1e;
  --md-on-surface: #e3e3e3;
  --md-on-surface-variant: #b0b0b0;
  --md-outline: #2a2a2a;

  --md-primary: #7c4dff; /* Deep Purple A200 */
  --md-primary-variant: #651fff;
  --md-primary-on: #ffffff;

  --md-error: #ff5370;
  --md-success: #00e676;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: var(--md-surface);
  color: var(--md-on-surface);
}

.app-header, .app-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 20px;
  border-bottom: 1px solid var(--md-outline);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
}
.app-footer {
  border-top: 1px solid var(--md-outline);
  border-bottom: none;
  color: var(--md-on-surface-variant);
  justify-content: center;
}
.brand {
  font-weight: 600;
  letter-spacing: 0.2px;
}
.hint { color: var(--md-on-surface-variant); font-size: 0.9rem; }

.container {
  max-width: 1100px;
  margin: 24px auto;
  padding: 0 16px;
}

.links { margin: 4px 0 10px; }
.ext-link { color: var(--md-primary); text-decoration: none; font-weight: 600; }
.ext-link:hover { text-decoration: underline; }
.filters-row { margin-top: 8px; }

.grid-2 {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 16px;
}
.
.grid .col { display: flex; flex-direction: column; gap: 6px; }
@media (max-width: 900px) {
  .grid-2 { grid-template-columns: 1fr; }
}

.card {
  background: var(--md-surface-variant);
  border: 1px solid var(--md-outline);
  border-radius: 12px;
  padding: 18px;
  margin-bottom: 18px;
  box-shadow: 0 3px 6px rgba(0,0,0,0.25), 0 1px 2px rgba(0,0,0,0.25);
}
.card.collapsed .card-body { display: none; }
.card .results-header { cursor: default; }
.card.can-toggle .results-header { cursor: pointer; }

h2 { margin: 0 0 12px; font-size: 1.1rem; }

.grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}
@media (max-width: 900px) {
  .grid { grid-template-columns: 1fr; }
}

/* Material field (filled variant) */
.md-field {
  position: relative;
  display: inline-flex;
  flex-direction: column-reverse;
  gap: 6px;
}
.md-field > input[type="file"] {
  color: var(--md-on-surface);
  background: #1a1a1a;
  border: 1px solid var(--md-outline);
  border-radius: 10px;
  padding: 10px 12px;
  outline: none;
}
.md-field > select {
  color: var(--md-on-surface);
  background: #1a1a1a;
  border: 1px solid var(--md-outline);
  border-radius: 10px;
  padding: 10px 12px;
  outline: none;
}
.md-field > span {
  color: var(--md-on-surface-variant);
  font-size: 0.85rem;
}
.md-field > input:focus {
  border-color: var(--md-primary);
  box-shadow: 0 0 0 3px rgba(124, 77, 255, 0.25);
}

.options { display: flex; align-items: center; padding-top: 8px; }
.checkbox { display: inline-flex; align-items: center; gap: 8px; color: var(--muted); }

.actions { margin-top: 10px; display: flex; gap: 10px; }
.btn {
  appearance: none;
  background: var(--md-primary);
  color: var(--md-primary-on);
  border: none;
  padding: 10px 14px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
}
.btn:hover { filter: brightness(1.05); }

.results-header { display: flex; align-items: center; justify-content: space-between; }
#summary, .muted { color: var(--md-on-surface-variant); font-size: 0.95rem; }
.loading { color: var(--md-on-surface-variant); }
.error { color: var(--md-error); white-space: pre-wrap; }

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 12px;
}
thead th {
  text-align: left;
  font-weight: 600;
  color: var(--md-on-surface-variant);
  border-bottom: 1px solid var(--md-outline);
  padding: 8px 6px;
}
tbody td {
  padding: 8px 6px;
  border-bottom: 1px dashed var(--md-outline);
  vertical-align: top;
}
tbody tr:hover { background: rgba(124, 77, 255, 0.08); }

.mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

.section-sub { margin: 8px 0 6px; font-size: 1rem; color: var(--md-on-surface-variant); font-weight: 600; }

.header-actions { display: inline-flex; align-items: center; gap: 10px; }
.btn-small { padding: 6px 10px; border-radius: 6px; font-weight: 600; font-size: 0.9rem; }
.btn[disabled] { opacity: 0.6; cursor: not-allowed; }

.chart-wrap {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-top: 10px;
}
.donut-legend { display: flex; flex-direction: column; }
.donut-percent { font-size: 1.6rem; font-weight: 700; }

/* Progress bar for stats */
.progress { 
  width: 100%; 
  height: 10px; 
  background: var(--md-outline); 
  border-radius: 999px; 
  overflow: hidden; 
}
.progress-bar { 
  height: 100%; 
  background: var(--md-success); 
  width: 0%; 
  transition: width 0.3s ease; 
}
.stats-table .label { white-space: nowrap; }
.stats-table td { vertical-align: middle; }
